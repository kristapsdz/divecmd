.\"	$Id$
.\"
.\" Copyright (c) 2018 Kristaps Dzonsons <kristaps@bsd.lv>
.\"
.\" This library is free software; you can redistribute it and/or
.\" modify it under the terms of the GNU Lesser General Public
.\" License as published by the Free Software Foundation; either
.\" version 2.1 of the License, or (at your option) any later version.
.\"
.\" This library is distributed in the hope that it will be useful,
.\" but WITHOUT ANY WARRANTY; without even the implied warranty of
.\" MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
.\" Lesser General Public License for more details.
.\"
.\" You should have received a copy of the GNU Lesser General Public
.\" License along with this library; if not, write to the Free Software
.\" Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston,
.\" MA 02110-1301 USA
.\"
.Dd $Mdocdate$
.Dt DIVECMD2DIVECMD 1
.Os
.Sh NAME
.Nm divecmd2divecmd
.Nd manipulate files produced by divecmd
.Sh SYNOPSIS
.Nm divecmd2divecmd
.Op Fl jsv
.Op Fl o Ar dir
.Op Ar
.Sh DESCRIPTION
The
.Nm
utility accepts divelog files produced by
.Xr divecmd 1
and manipulates their contents: it can split individual dives into
multiple dives
.Pq Fl s ,
it can join multiple dives into a single dive
.Pq Fl j ,
or join multiple divelogs into a single divelog
.Pq the default .
.Pp
Splitting
.Pq Fl s
is useful for establishing
.Dq canonical free dive mode ,
wherein each dive in a sequence has its own dive profile and surface
time is omitted.
Many dive computers automatically produce canonical free diving mode,
for example, the Suunto D6i.
Others, like the HW OSTC 2C, do not, and instead put all dives into one,
including surface time.
.Pp
Joining
.Pq Fl j
is useful when exporting data into Subsurface, which expects a single
dive profile.
Here, a set of dives are merged into a single one.
Dives not using the same dive computer as the first (by date) are
omitted.
.Pp
If dives already are split,
.Fl s
does nothing; same goes with
.Fl j
and dives already being joined.
.Pp
If invoked using neither
.Fl j
nor
.Fl s ,
all dives are merged into a single divelog.
All dives must have the same dive computer as the first (by date), else
they are omitted, and duplicate fingerprints are also omitted.
.Pp
The only other arguments are
.Fl v ,
which triggers verbose parsing, and
.Fl o Ar dir ,
which outputs dive files (one dive per file) into
.Ar dir .
.Pp
.Nm
produces output on standard output as documented in
.Xr divecmd 1 .
.Sh EXIT STATUS
.Ex -std
.Sh SEE ALSO
.Xr divecmd 1
.Sh AUTHORS
The
.Nm
utility was written by
.An Kristaps Dzonsons ,
.Mt kristaps@bsd.lv .
.Sh BUGS
Some data (e.g., vendor events) are ignored during conversion.
